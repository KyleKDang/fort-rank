{% extends "layout.html" %}

{% block title %}
    Player Rankings
{% endblock %}

{% block main %}
    <h1 class="mb-4">Player Rankings</h1>

    <form action="/" method="post" class="mb-4" style="display: flex; align-items: center;">
        <div class="form-group" style="margin-right: 10px;">
            <select id="sort_by" name="sort_by" class="form-control" onchange="this.form.submit()">
                <option value="" disabled selected>Sort By</option>
                <option value="rank">User Rank</option>
                <option value="total_earnings">Earnings</option>
            </select>
        </div>
    </form>
    
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Username</th>
                <th>Name</th>
                <th>Age</th>
                <th>Country</th>
                <th>Total Earnings</th>
                <th>Image</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for player in players %}
            <tr>
                <td>{{ player["position"] }}</td>
                <td>{{ player["username"] }}</td>
                <td>{{ player["name"] }}</td>
                <td>{{ player["age"] }}</td>
                <td>{{ player["country"] }}</td>
                <td>{{ player["total_earnings"] }}</td>
                <td><img src="{{ player['image_url'] }}" alt="{{ player['username'] }}" class="img-thumbnail" style="width: 100px;height: 100px; object-fit: cover"></td>
                <td>
                    <form action="/move_up/{{ player['rank'] }}" method="post" style="display:inline;">
                        <button type="submit" class="btn btn-success">
                            <i class="bi bi-arrow-up"></i>
                        </button>
                    </form>
                    <form action="/move_down/{{ player['rank'] }}" method="post" style="display:inline;">
                        <button type="submit" class="btn btn-danger">
                            <i class="bi bi-arrow-down"></i>
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
